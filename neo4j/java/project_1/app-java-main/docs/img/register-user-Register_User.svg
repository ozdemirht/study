<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="847px" preserveAspectRatio="none" style="width:978px;height:847px;background:#FFFFFF;" version="1.1" viewBox="0 0 978 847" width="978px" zoomAndPan="magnify"><defs/><g><rect height="27.6094" style="stroke:#00000000;stroke-width:1.0;fill:none;" width="107" x="435.25" y="10"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="97" x="440.25" y="29.5332">Register User</text><rect fill="#90EE90" height="796.6016" style="stroke:#181818;stroke-width:0.5;" width="59" x="113" y="44.6094"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="52" x="116.5" y="58.1045">Browser</text><rect fill="#ADD8E6" height="796.6016" style="stroke:#181818;stroke-width:0.5;" width="477.5" x="258.5" y="44.6094"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="86" x="454.25" y="58.1045">REST Service</text><rect fill="#FFFFFF" height="211.4609" style="stroke:#181818;stroke-width:1.0;" width="10" x="675.5" y="320.6797"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="22" x2="22" y1="121.2188" y2="760.6016"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="142" x2="142" y1="121.2188" y2="760.6016"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="302.5" x2="302.5" y1="121.2188" y2="760.6016"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="417.5" x2="417.5" y1="121.2188" y2="760.6016"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="573" x2="573" y1="121.2188" y2="760.6016"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="680" x2="680" y1="121.2188" y2="760.6016"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="848.5" x2="848.5" y1="121.2188" y2="760.6016"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29" x="5" y="118.1426">User</text><ellipse cx="22.5" cy="52.1094" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M22.5,60.1094 L22.5,87.1094 M9.5,68.1094 L35.5,68.1094 M22.5,87.1094 L9.5,102.1094 M22.5,87.1094 L35.5,102.1094 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29" x="5" y="774.1348">User</text><ellipse cx="22.5" cy="785.7109" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M22.5,793.7109 L22.5,820.7109 M9.5,801.7109 L35.5,801.7109 M22.5,820.7109 L9.5,835.7109 M22.5,820.7109 L35.5,835.7109 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="51" x="117" y="88.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="37" x="124" y="110.1426">AppUI</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="51" x="117" y="759.6016"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="37" x="124" y="781.1348">AppUI</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="80" x="262.5" y="88.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="269.5" y="110.1426">SparkJava</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="80" x="262.5" y="759.6016"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="269.5" y="781.1348">SparkJava</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="90" x="372.5" y="88.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76" x="379.5" y="110.1426">AuthService</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="90" x="372.5" y="759.6016"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76" x="379.5" y="781.1348">AuthService</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="91" x="528" y="88.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="535" y="110.1426">Neo4JDriver</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="91" x="528" y="759.6016"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="535" y="781.1348">Neo4JDriver</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="103" x="629" y="88.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89" x="636" y="110.1426">Neo4JSession</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="103" x="629" y="759.6016"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89" x="636" y="781.1348">Neo4JSession</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="796.5" y="118.1426">Neo4JGraphDB</text><path d="M830.5,67.6094 C830.5,57.6094 848.5,57.6094 848.5,57.6094 C848.5,57.6094 866.5,57.6094 866.5,67.6094 L866.5,93.6094 C866.5,103.6094 848.5,103.6094 848.5,103.6094 C848.5,103.6094 830.5,103.6094 830.5,93.6094 L830.5,67.6094 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M830.5,67.6094 C830.5,77.6094 848.5,77.6094 848.5,77.6094 C848.5,77.6094 866.5,77.6094 866.5,67.6094 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="796.5" y="774.1348">Neo4JGraphDB</text><path d="M830.5,787.2109 C830.5,777.2109 848.5,777.2109 848.5,777.2109 C848.5,777.2109 866.5,777.2109 866.5,787.2109 L866.5,813.2109 C866.5,823.2109 848.5,823.2109 848.5,823.2109 C848.5,823.2109 830.5,823.2109 830.5,813.2109 L830.5,787.2109 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M830.5,787.2109 C830.5,797.2109 848.5,797.2109 848.5,797.2109 C848.5,797.2109 866.5,797.2109 866.5,787.2109 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><rect fill="#FFFFFF" height="211.4609" style="stroke:#181818;stroke-width:1.0;" width="10" x="675.5" y="320.6797"/><polygon fill="#181818" points="130.5,165.9219,140.5,169.9219,130.5,173.9219,134.5,169.9219" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="22.5" x2="136.5" y1="169.9219" y2="169.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="41" x="29.5" y="148.7139">Submit</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96" x="29.5" y="165.0654">registration page</text><polygon fill="#181818" points="290.5,212.625,300.5,216.625,290.5,220.625,294.5,216.625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="142.5" x2="296.5" y1="216.625" y2="216.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="76" x="149.5" y="195.417">/auth/register</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="67" x="149.5" y="211.7686">name,email</text><polygon fill="#181818" points="405.5,242.9766,415.5,246.9766,405.5,250.9766,409.5,246.9766" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="302.5" x2="411.5" y1="246.9766" y2="246.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="51" x="309.5" y="242.1201">register()</text><line style="stroke:#181818;stroke-width:1.0;" x1="417.5" x2="459.5" y1="277.3281" y2="277.3281"/><line style="stroke:#181818;stroke-width:1.0;" x1="459.5" x2="459.5" y1="277.3281" y2="290.3281"/><line style="stroke:#181818;stroke-width:1.0;" x1="418.5" x2="459.5" y1="290.3281" y2="290.3281"/><polygon fill="#181818" points="428.5,286.3281,418.5,290.3281,428.5,294.3281,424.5,290.3281" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133" x="424.5" y="272.4717">encrypt plain password</text><polygon fill="#181818" points="561.5,316.6797,571.5,320.6797,561.5,324.6797,565.5,320.6797" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="417.5" x2="567.5" y1="320.6797" y2="320.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53" x="424.5" y="315.8232">session()</text><polygon fill="#181818" points="428.5,347.0313,418.5,351.0313,428.5,355.0313,424.5,351.0313" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="422.5" x2="572.5" y1="351.0313" y2="351.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="132" x="434.5" y="346.1748">&lt;&lt;session activated&gt;&gt;</text><polygon fill="#181818" points="663.5,377.3828,673.5,381.3828,663.5,385.3828,667.5,381.3828" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="417.5" x2="669.5" y1="381.3828" y2="381.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="185" x="424.5" y="376.5264">writeTransaction(Cypher_Query)</text><polygon fill="#181818" points="836.5,407.7344,846.5,411.7344,836.5,415.7344,840.5,411.7344" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="685.5" x2="842.5" y1="411.7344" y2="411.7344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139" x="692.5" y="406.8779">Request(Cypher_Query)</text><line style="stroke:#181818;stroke-width:1.0;" x1="848.5" x2="890.5" y1="458.4375" y2="458.4375"/><line style="stroke:#181818;stroke-width:1.0;" x1="890.5" x2="890.5" y1="458.4375" y2="471.4375"/><line style="stroke:#181818;stroke-width:1.0;" x1="849.5" x2="890.5" y1="471.4375" y2="471.4375"/><polygon fill="#181818" points="859.5,467.4375,849.5,471.4375,859.5,475.4375,855.5,471.4375" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="855.5" y="437.2295">Adds User Node</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="855.5" y="453.5811">and generates UUID</text><polygon fill="#181818" points="696.5,497.7891,686.5,501.7891,696.5,505.7891,692.5,501.7891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="690.5" x2="847.5" y1="501.7891" y2="501.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124" x="702.5" y="496.9326">Response with userId</text><polygon fill="#181818" points="428.5,528.1406,418.5,532.1406,428.5,536.1406,424.5,532.1406" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="422.5" x2="679.5" y1="532.1406" y2="532.1406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105" x="434.5" y="527.2842">Response(userId,)</text><line style="stroke:#181818;stroke-width:1.0;" x1="417.5" x2="459.5" y1="562.4922" y2="562.4922"/><line style="stroke:#181818;stroke-width:1.0;" x1="459.5" x2="459.5" y1="562.4922" y2="575.4922"/><line style="stroke:#181818;stroke-width:1.0;" x1="418.5" x2="459.5" y1="575.4922" y2="575.4922"/><polygon fill="#181818" points="428.5,571.4922,418.5,575.4922,428.5,579.4922,424.5,575.4922" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="424.5" y="557.6357">Generate Bearer Token</text><line style="stroke:#181818;stroke-width:1.0;" x1="417.5" x2="459.5" y1="605.8438" y2="605.8438"/><line style="stroke:#181818;stroke-width:1.0;" x1="459.5" x2="459.5" y1="605.8438" y2="618.8438"/><line style="stroke:#181818;stroke-width:1.0;" x1="418.5" x2="459.5" y1="618.8438" y2="618.8438"/><polygon fill="#181818" points="428.5,614.8438,418.5,618.8438,428.5,622.8438,424.5,618.8438" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="76" x="424.5" y="600.9873">Cache Token</text><polygon fill="#181818" points="313.5,661.5469,303.5,665.5469,313.5,669.5469,309.5,665.5469" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="307.5" x2="416.5" y1="665.5469" y2="665.5469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="319.5" y="644.3389">&lt;&lt;token,userId,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83" x="319.5" y="660.6904">email,name&gt;&gt;</text><polygon fill="#181818" points="153.5,708.25,143.5,712.25,153.5,716.25,149.5,712.25" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="147.5" x2="301.5" y1="712.25" y2="712.25"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="159.5" y="691.042">JSON-Response(token,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="159.5" y="707.3936">userId,email,name)</text><polygon fill="#181818" points="33.5,738.6016,23.5,742.6016,33.5,746.6016,29.5,742.6016" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="27.5" x2="141.5" y1="742.6016" y2="742.6016"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58" x="39.5" y="737.7451">Response</text><!--MD5=[b4e17ba23f869f5656b16a8a54686a41]
@startuml

title "Register User"

actor User as User
box "Browser" #LightGreen
participant AppUI as AppUI
end box

box "REST Service" #LightBlue
participant SparkJava as SparkJava
participant AuthService as AuthService
participant Neo4JDriver as Neo4JDriver
participant Neo4JSession as Neo4JSession
end box

database Neo4JGraphDB as Neo4JGraphDB

User -> AppUI: Submit \nregistration page
AppUI -> SparkJava: /auth/register\nname,email
SparkJava -> AuthService : register()
AuthService -> AuthService : encrypt plain password
AuthService -> Neo4JDriver : session()
activate Neo4JSession
Neo4JDriver- ->AuthService : <<session activated>>

AuthService -> Neo4JSession : writeTransaction(Cypher_Query)
Neo4JSession -> Neo4JGraphDB: Request(Cypher_Query)
Neo4JGraphDB -> Neo4JGraphDB: Adds User Node \nand generates UUID
Neo4JGraphDB - -> Neo4JSession: Response with userId
Neo4JSession - -> AuthService:  Response(userId,)
deactivate Neo4JSession
AuthService -> AuthService : Generate Bearer Token
AuthService -> AuthService : Cache Token
AuthService - -> SparkJava : <<token,userId,\nemail,name>>
SparkJava - -> AppUI: JSON-Response(token,\nuserId,email,name)
AppUI - -> User: Response

@enduml

PlantUML version 1.2022.6(Tue Jun 21 13:34:49 EDT 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: en
Country: US
--></g></svg>