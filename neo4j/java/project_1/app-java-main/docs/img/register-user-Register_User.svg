<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1374px" preserveAspectRatio="none" style="width:1078px;height:1374px;background:#FFFFFF;" version="1.1" viewBox="0 0 1078 1374" width="1078px" zoomAndPan="magnify"><defs/><g><rect height="27.6094" style="stroke:#00000000;stroke-width:1.0;fill:none;" width="288" x="391.25" y="23.5781"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="278" x="396.25" y="43.1113">Register User (UML Sequence Diagram)</text><rect fill="#90EE90" height="1309.9531" style="stroke:#181818;stroke-width:0.5;" width="59" x="168" y="58.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="52" x="171.5" y="71.6826">Browser</text><rect fill="#ADD8E6" height="1309.9531" style="stroke:#181818;stroke-width:0.5;" width="477.5" x="313.5" y="58.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="86" x="509.25" y="71.6826">REST Service</text><rect fill="#FFFFFF" height="453.4609" style="stroke:#181818;stroke-width:1.0;" width="10" x="730.5" y="575.2578"/><rect fill="#FFB6C1" height="935.2734" style="stroke:#000000;stroke-width:1.5;" width="1051.5" x="10" y="335.2578"/><rect fill="#ADD8E6" height="776.8125" style="stroke:none;stroke-width:1.0;" width="1051.5" x="10" y="493.7188"/><rect fill="#FFB6C1" height="582.2188" style="stroke:#000000;stroke-width:1.5;" width="1031.5" x="20" y="681.3125"/><rect fill="#ADD8E6" height="363.0547" style="stroke:none;stroke-width:1.0;" width="1031.5" x="20" y="900.4766"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="47" x2="47" y1="134.7969" y2="1287.5313"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="197" x2="197" y1="134.7969" y2="1287.5313"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="357.5" x2="357.5" y1="134.7969" y2="1287.5313"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="472.5" x2="472.5" y1="134.7969" y2="1287.5313"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="628" x2="628" y1="134.7969" y2="1287.5313"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="735" x2="735" y1="134.7969" y2="1287.5313"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="916.5" x2="916.5" y1="134.7969" y2="1287.5313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29" x="30" y="131.7207">User</text><ellipse cx="47.5" cy="65.6875" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M47.5,73.6875 L47.5,100.6875 M34.5,81.6875 L60.5,81.6875 M47.5,100.6875 L34.5,115.6875 M47.5,100.6875 L60.5,115.6875 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29" x="30" y="1301.0645">User</text><ellipse cx="47.5" cy="1312.6406" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M47.5,1320.6406 L47.5,1347.6406 M34.5,1328.6406 L60.5,1328.6406 M47.5,1347.6406 L34.5,1362.6406 M47.5,1347.6406 L60.5,1362.6406 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="51" x="172" y="102.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="37" x="179" y="123.7207">AppUI</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="51" x="172" y="1286.5313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="37" x="179" y="1308.0645">AppUI</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="80" x="317.5" y="102.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="324.5" y="123.7207">SparkJava</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="80" x="317.5" y="1286.5313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="324.5" y="1308.0645">SparkJava</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="90" x="427.5" y="102.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76" x="434.5" y="123.7207">AuthService</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="90" x="427.5" y="1286.5313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76" x="434.5" y="1308.0645">AuthService</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="91" x="583" y="102.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="590" y="123.7207">Neo4JDriver</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="91" x="583" y="1286.5313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="590" y="1308.0645">Neo4JDriver</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="103" x="684" y="102.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89" x="691" y="123.7207">Neo4JSession</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="103" x="684" y="1286.5313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89" x="691" y="1308.0645">Neo4JSession</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="864.5" y="131.7207">Neo4JGraphDB</text><path d="M898.5,81.1875 C898.5,71.1875 916.5,71.1875 916.5,71.1875 C916.5,71.1875 934.5,71.1875 934.5,81.1875 L934.5,107.1875 C934.5,117.1875 916.5,117.1875 916.5,117.1875 C916.5,117.1875 898.5,117.1875 898.5,107.1875 L898.5,81.1875 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M898.5,81.1875 C898.5,91.1875 916.5,91.1875 916.5,91.1875 C916.5,91.1875 934.5,91.1875 934.5,81.1875 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="864.5" y="1301.0645">Neo4JGraphDB</text><path d="M898.5,1314.1406 C898.5,1304.1406 916.5,1304.1406 916.5,1304.1406 C916.5,1304.1406 934.5,1304.1406 934.5,1314.1406 L934.5,1340.1406 C934.5,1350.1406 916.5,1350.1406 916.5,1350.1406 C916.5,1350.1406 898.5,1350.1406 898.5,1340.1406 L898.5,1314.1406 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M898.5,1314.1406 C898.5,1324.1406 916.5,1324.1406 916.5,1324.1406 C916.5,1324.1406 934.5,1324.1406 934.5,1314.1406 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><rect fill="#FFFFFF" height="453.4609" style="stroke:#181818;stroke-width:1.0;" width="10" x="730.5" y="575.2578"/><polygon fill="#181818" points="185.5,179.5,195.5,183.5,185.5,187.5,189.5,183.5" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="47.5" x2="191.5" y1="183.5" y2="183.5"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="41" x="54.5" y="162.292">Submit</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96" x="54.5" y="178.6436">registration page</text><polygon fill="#181818" points="345.5,226.2031,355.5,230.2031,345.5,234.2031,349.5,230.2031" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="197.5" x2="351.5" y1="230.2031" y2="230.2031"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="76" x="204.5" y="208.9951">/auth/register</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="67" x="204.5" y="225.3467">name,email</text><polygon fill="#181818" points="460.5,256.5547,470.5,260.5547,460.5,264.5547,464.5,260.5547" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="357.5" x2="466.5" y1="260.5547" y2="260.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="51" x="364.5" y="255.6982">register()</text><line style="stroke:#181818;stroke-width:1.0;" x1="472.5" x2="514.5" y1="307.2578" y2="307.2578"/><line style="stroke:#181818;stroke-width:1.0;" x1="514.5" x2="514.5" y1="307.2578" y2="320.2578"/><line style="stroke:#181818;stroke-width:1.0;" x1="473.5" x2="514.5" y1="320.2578" y2="320.2578"/><polygon fill="#181818" points="483.5,316.2578,473.5,320.2578,483.5,324.2578,479.5,320.2578" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72" x="479.5" y="286.0498">Check email</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52" x="479.5" y="302.4014">is unique</text><path d="M10,335.2578 L71,335.2578 L71,343.6094 L61,353.6094 L10,353.6094 L10,335.2578 " fill="#FF0000" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="935.2734" style="stroke:#000000;stroke-width:1.5;" width="1051.5" x="10" y="335.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="25" y="349.7529">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="45" x="86" y="348.6768">[Failure]</text><polygon fill="#181818" points="368.5,388.3125,358.5,392.3125,368.5,396.3125,364.5,392.3125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="362.5" x2="471.5" y1="392.3125" y2="392.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="32" x="374.5" y="371.1045">Error:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90" x="374.5" y="387.4561">Account exists!</text><polygon fill="#181818" points="208.5,435.0156,198.5,439.0156,208.5,443.0156,204.5,439.0156" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="202.5" x2="356.5" y1="439.0156" y2="439.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="32" x="214.5" y="417.8076">Error:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90" x="214.5" y="434.1592">Account exists!</text><polygon fill="#181818" points="58.5,481.7188,48.5,485.7188,58.5,489.7188,54.5,485.7188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="52.5" x2="196.5" y1="485.7188" y2="485.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58" x="64.5" y="464.5107">Response</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="64.5" y="480.8623">Error: Account exists!</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="1061.5" y1="494.7188" y2="494.7188"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="58" x="15" y="506.1377">[Continue]</text><line style="stroke:#181818;stroke-width:1.0;" x1="472.5" x2="514.5" y1="531.9063" y2="531.9063"/><line style="stroke:#181818;stroke-width:1.0;" x1="514.5" x2="514.5" y1="531.9063" y2="544.9063"/><line style="stroke:#181818;stroke-width:1.0;" x1="473.5" x2="514.5" y1="544.9063" y2="544.9063"/><polygon fill="#181818" points="483.5,540.9063,473.5,544.9063,483.5,548.9063,479.5,544.9063" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133" x="479.5" y="527.0498">encrypt plain password</text><polygon fill="#181818" points="616.5,571.2578,626.5,575.2578,616.5,579.2578,620.5,575.2578" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="472.5" x2="622.5" y1="575.2578" y2="575.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53" x="479.5" y="570.4014">session()</text><polygon fill="#181818" points="483.5,601.6094,473.5,605.6094,483.5,609.6094,479.5,605.6094" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="477.5" x2="627.5" y1="605.6094" y2="605.6094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="132" x="489.5" y="600.7529">&lt;&lt;session activated&gt;&gt;</text><polygon fill="#181818" points="718.5,631.9609,728.5,635.9609,718.5,639.9609,722.5,635.9609" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="472.5" x2="724.5" y1="635.9609" y2="635.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="185" x="479.5" y="631.1045">writeTransaction(Cypher_Query)</text><polygon fill="#181818" points="904.5,662.3125,914.5,666.3125,904.5,670.3125,908.5,666.3125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="740.5" x2="910.5" y1="666.3125" y2="666.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139" x="747.5" y="661.4561">Request(Cypher_Query)</text><path d="M20,681.3125 L81,681.3125 L81,689.6641 L71,699.6641 L20,699.6641 L20,681.3125 " fill="#FF0000" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="582.2188" style="stroke:#000000;stroke-width:1.5;" width="1031.5" x="20" y="681.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="35" y="695.8076">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="45" x="96" y="694.7314">[Failure]</text><polygon fill="#181818" points="751.5,718.0156,741.5,722.0156,751.5,726.0156,747.5,722.0156" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="745.5" x2="915.5" y1="722.0156" y2="722.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="757.5" y="717.1592">ConstraintViolation (email)</text><polygon fill="#181818" points="483.5,748.3672,473.5,752.3672,483.5,756.3672,479.5,752.3672" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="477.5" x2="729.5" y1="752.3672" y2="752.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="489.5" y="747.5107">ConstraintViolation (email)</text><polygon fill="#181818" points="368.5,795.0703,358.5,799.0703,368.5,803.0703,364.5,799.0703" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="362.5" x2="471.5" y1="799.0703" y2="799.0703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="32" x="374.5" y="777.8623">Error:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90" x="374.5" y="794.2139">Account exists!</text><polygon fill="#181818" points="208.5,841.7734,198.5,845.7734,208.5,849.7734,204.5,845.7734" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="202.5" x2="356.5" y1="845.7734" y2="845.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="32" x="214.5" y="824.5654">Error:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90" x="214.5" y="840.917">Account exists!</text><polygon fill="#181818" points="58.5,888.4766,48.5,892.4766,58.5,896.4766,54.5,892.4766" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="52.5" x2="196.5" y1="892.4766" y2="892.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58" x="64.5" y="871.2686">Response</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="64.5" y="887.6201">Error: Account exists!</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="20" x2="1051.5" y1="901.4766" y2="901.4766"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="58" x="25" y="912.8955">[Continue]</text><line style="stroke:#181818;stroke-width:1.0;" x1="916.5" x2="958.5" y1="955.0156" y2="955.0156"/><line style="stroke:#181818;stroke-width:1.0;" x1="958.5" x2="958.5" y1="955.0156" y2="968.0156"/><line style="stroke:#181818;stroke-width:1.0;" x1="917.5" x2="958.5" y1="968.0156" y2="968.0156"/><polygon fill="#181818" points="927.5,964.0156,917.5,968.0156,927.5,972.0156,923.5,968.0156" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="923.5" y="933.8076">Adds User Node</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="923.5" y="950.1592">and generates UUID</text><polygon fill="#181818" points="751.5,994.3672,741.5,998.3672,751.5,1002.3672,747.5,998.3672" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="745.5" x2="915.5" y1="998.3672" y2="998.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124" x="757.5" y="993.5107">Response with userId</text><polygon fill="#181818" points="483.5,1024.7188,473.5,1028.7188,483.5,1032.7188,479.5,1028.7188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="477.5" x2="734.5" y1="1028.7188" y2="1028.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105" x="489.5" y="1023.8623">Response(userId,)</text><line style="stroke:#181818;stroke-width:1.0;" x1="472.5" x2="514.5" y1="1059.0703" y2="1059.0703"/><line style="stroke:#181818;stroke-width:1.0;" x1="514.5" x2="514.5" y1="1059.0703" y2="1072.0703"/><line style="stroke:#181818;stroke-width:1.0;" x1="473.5" x2="514.5" y1="1072.0703" y2="1072.0703"/><polygon fill="#181818" points="483.5,1068.0703,473.5,1072.0703,483.5,1076.0703,479.5,1072.0703" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="479.5" y="1054.2139">Generate Bearer Token</text><line style="stroke:#181818;stroke-width:1.0;" x1="472.5" x2="514.5" y1="1102.4219" y2="1102.4219"/><line style="stroke:#181818;stroke-width:1.0;" x1="514.5" x2="514.5" y1="1102.4219" y2="1115.4219"/><line style="stroke:#181818;stroke-width:1.0;" x1="473.5" x2="514.5" y1="1115.4219" y2="1115.4219"/><polygon fill="#181818" points="483.5,1111.4219,473.5,1115.4219,483.5,1119.4219,479.5,1115.4219" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="76" x="479.5" y="1097.5654">Cache Token</text><polygon fill="#181818" points="368.5,1158.125,358.5,1162.125,368.5,1166.125,364.5,1162.125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="362.5" x2="471.5" y1="1162.125" y2="1162.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="374.5" y="1140.917">&lt;&lt;token,userId,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83" x="374.5" y="1157.2686">email,name&gt;&gt;</text><polygon fill="#181818" points="208.5,1204.8281,198.5,1208.8281,208.5,1212.8281,204.5,1208.8281" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="202.5" x2="356.5" y1="1208.8281" y2="1208.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="214.5" y="1187.6201">JSON-Response(token,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="214.5" y="1203.9717">userId,email,name)</text><polygon fill="#181818" points="58.5,1251.5313,48.5,1255.5313,58.5,1259.5313,54.5,1255.5313" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="52.5" x2="196.5" y1="1255.5313" y2="1255.5313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="62" x="64.5" y="1234.3232">Response:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="51" x="64.5" y="1250.6748">Success</text><rect height="12.5781" style="stroke:#00000000;stroke-width:1.0;fill:none;" width="92" x="978.5" y="5"/><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="92" x="978.5" y="15.3809">By PlantUML (timo)</text><!--MD5=[48cf48c0570c12e513358852c5a99e99]
@startuml

title "Register User (UML Sequence Diagram)"
header By PlantUML (timo)

actor User as User

box "Browser" #LightGreen
participant AppUI as AppUI
end box

box "REST Service" #LightBlue
participant SparkJava as SparkJava
participant AuthService as AuthService
participant Neo4JDriver as Neo4JDriver
participant Neo4JSession as Neo4JSession
end box

database Neo4JGraphDB as Neo4JGraphDB

User -> AppUI: Submit \nregistration page
AppUI -> SparkJava: /auth/register\nname,email
SparkJava -> AuthService : register()
AuthService -> AuthService : Check email \nis unique

alt#Red #LightPink Failure

AuthService - -> SparkJava : Error: \nAccount exists!
SparkJava - -> AppUI: Error: \nAccount exists!
AppUI - -> User: Response \nError: Account exists!

else #LightBlue Continue

AuthService -> AuthService : encrypt plain password
AuthService -> Neo4JDriver : session()
activate Neo4JSession
Neo4JDriver- ->AuthService : <<session activated>>

AuthService -> Neo4JSession : writeTransaction(Cypher_Query)
Neo4JSession -> Neo4JGraphDB: Request(Cypher_Query)

alt#Red #LightPink Failure

Neo4JGraphDB - -> Neo4JSession: ConstraintViolation (email)
Neo4JSession - -> AuthService:  ConstraintViolation (email)

AuthService - -> SparkJava : Error: \nAccount exists!
SparkJava - -> AppUI: Error: \nAccount exists!
AppUI - -> User: Response \nError: Account exists!

else #LightBlue Continue
Neo4JGraphDB -> Neo4JGraphDB: Adds User Node \nand generates UUID
Neo4JGraphDB - -> Neo4JSession: Response with userId
Neo4JSession - -> AuthService:  Response(userId,)
deactivate Neo4JSession
AuthService -> AuthService : Generate Bearer Token
AuthService -> AuthService : Cache Token
AuthService - -> SparkJava : <<token,userId,\nemail,name>>
SparkJava - -> AppUI: JSON-Response(token,\nuserId,email,name)
AppUI - -> User: Response: \nSuccess

end
end

@enduml

PlantUML version 1.2022.6(Tue Jun 21 13:34:49 EDT 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: en
Country: US
--></g></svg>